{"ast":null,"code":"/*\nCopyright (c) 2020 Daybrush\nname: react-selecto\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/selecto/blob/master/packages/react-selecto\nversion: 1.13.2\n*/\nimport { createElement, PureComponent } from 'react';\nimport VanillaSelecto, { EVENTS, CLASS_NAME, OPTIONS, PROPERTIES, METHODS } from 'selecto';\nexport * from 'selecto';\nimport { ref, withMethods } from 'framework-utils';\nimport { camelize } from '@daybrush/utils';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nvar REACT_EVENTS = EVENTS.map(function (name) {\n  return camelize(\"on \" + name);\n});\n\nvar Selecto = /*#__PURE__*/function (_super) {\n  __extends(Selecto, _super);\n\n  function Selecto() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  var __proto = Selecto.prototype;\n\n  __proto.render = function () {\n    return createElement(\"div\", {\n      className: CLASS_NAME,\n      ref: ref(this, \"selectionElement\")\n    });\n  };\n\n  __proto.componentDidMount = function () {\n    var _this = this;\n\n    var props = this.props;\n    var options = {};\n    OPTIONS.forEach(function (name) {\n      if (name in props) {\n        options[name] = props[name];\n      }\n    });\n    this.selecto = new VanillaSelecto(_assign(_assign({}, options), {\n      target: this.selectionElement\n    }));\n    EVENTS.forEach(function (name, i) {\n      _this.selecto.on(name, function (e) {\n        var selfProps = _this.props;\n        var result = selfProps[REACT_EVENTS[i]] && selfProps[REACT_EVENTS[i]](e);\n\n        if (result === false) {\n          e.stop();\n        }\n      });\n    });\n  };\n\n  __proto.componentDidUpdate = function (prevProps) {\n    var props = this.props;\n    var selecto = this.selecto;\n    PROPERTIES.forEach(function (name) {\n      if (prevProps[name] !== props[name]) {\n        selecto[name] = props[name];\n      }\n    });\n  };\n\n  __proto.componentWillUnmount = function () {\n    this.selecto.destroy();\n  };\n\n  __decorate([withMethods(METHODS)], Selecto.prototype, \"selecto\", void 0);\n\n  return Selecto;\n}(PureComponent);\n\nexport default Selecto;","map":{"version":3,"sources":["../src/react-selecto/consts.ts","../src/react-selecto/Selecto.tsx"],"names":["REACT_EVENTS","camelize","__extends","withMethods","__decorate","className","CLASS_NAME","ref","props","options","OPTIONS","name","target","selectionElement","EVENTS","_this","selfProps","result","e","selecto","PROPERTIES","prevProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGO,IAAMA,YAAY,GAAI,MAAM,CAAN,GAAA,CAAW,UAAA,IAAA,EAAA;SAAQC,QAAQ,CAAC,QAATA,IAAQ,C;AAAjD,CAAsB,CAAtB;;ACYP,IAAA,OAAA,G;AAAqCC,EAAAA,SAAAA,CAAAA,OAAAA,EAAAA,MAAAA,CAAAA;;WAArC,O,GAAA;;;;;;UAIW,M,GAAP,YAAA;WACW,aAAA,CAAA,KAAA,EAAA;AAAKG,MAAAA,SAAS,EAAEC,UAAhB;AAA4BC,MAAAA,GAAG,EAAEA,GAAG,CAAA,IAAA,EAAA,kBAAA;AAApC,KAAA,C;AADJ,G;;UAGA,iB,GAAP,YAAA;gBAAA,I;;QACUC,KAAK,GAAG,KAAd,K;QACMC,OAAO,GAAb,E;AAEAC,IAAAA,OAAO,CAAPA,OAAAA,CAAgB,UAAA,IAAA,EAAA;UACRC,IAAI,IAAR,K,EAAmB;AACdF,QAAAA,OAAe,CAAfA,IAAe,CAAfA,GAAwBD,KAAK,CAA7BC,IAA6B,CAA7BA;;AAFTC,KAAAA;SAKA,O,GAAe,IAAA,cAAA,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA,EACRD,OADQ,CAAA,EACRA;AACHG,MAAAA,MAAM,EAAE,KAAKC;AADVJ,KADQ,CAAA,C;AAKfK,IAAAA,MAAM,CAANA,OAAAA,CAAe,UAAA,IAAA,EAAA,CAAA,EAAA;AACXC,MAAAA,KAAI,CAAJA,OAAAA,CAAAA,EAAAA,CAAAA,IAAAA,EAAsB,UAAA,CAAA,EAAA;YACZC,SAAS,GAAGD,KAAI,CAAtB,K;YACME,MAAM,GAAGD,SAAS,CAAChB,YAAY,CAAtBgB,CAAsB,CAAb,CAATA,IAA8BA,SAAS,CAAChB,YAAY,CAAtBgB,CAAsB,CAAb,CAATA,CAA7C,CAA6CA,C;;YAEzCC,MAAM,KAAV,K,EAAsB;AAClBC,UAAAA,CAAC,CAADA,IAAAA;;AALRH,OAAAA;AADJD,KAAAA;AAdG,G;;UAyBA,kB,GAAP,UAAA,SAAA,EAAA;QACUN,KAAK,GAAG,KAAd,K;QACMW,OAAO,GAAG,KAAhB,O;AAEAC,IAAAA,UAAU,CAAVA,OAAAA,CAAmB,UAAA,IAAA,EAAA;UACXC,SAAS,CAATA,IAAS,CAATA,KAAoBb,KAAK,CAA7B,IAA6B,C,EAAQ;AAChCW,QAAAA,OAAe,CAAfA,IAAe,CAAfA,GAAwBX,KAAK,CAA7BW,IAA6B,CAA7BA;;AAFTC,KAAAA;AAJG,G;;UAUA,oB,GAAP,YAAA;SACI,O,CAAA,O;AADG,G;;AAxCPhB,EAAAA,UAAAA,CAAAA,CADCD,WAAW,CAAA,OAAA,CACZC,CAAAA,EADY,OAAA,CAAA,SACZA,EADY,SACZA,EADY,KAAA,CACZA,CAAAA;;SA2CJ,O;EA7CA,a,CAAA","sourcesContent":["import { EVENTS } from \"selecto\";\nimport { camelize } from \"@daybrush/utils\";\n\nexport const REACT_EVENTS =  EVENTS.map(name => camelize(`on ${name}`));\n","import * as React from \"react\";\nimport VanillaSelecto, {\n    CLASS_NAME,\n    OPTIONS,\n    SelectoOptions,\n    PROPERTIES,\n    SelectoProperties,\n    EVENTS,\n    SelectoMethods,\n    METHODS,\n} from \"selecto\";\nimport { ref, MethodInterface, withMethods } from \"framework-utils\";\nimport { SelectoProps } from \"./types\";\nimport { REACT_EVENTS } from \"./consts\";\n\nexport default class Selecto extends React.PureComponent<Partial<SelectoProps>> {\n    @withMethods(METHODS as any)\n    private selecto!: VanillaSelecto;\n    private selectionElement!: HTMLElement;\n    public render() {\n        return <div className={CLASS_NAME} ref={ref(this, \"selectionElement\")}></div>;\n    }\n    public componentDidMount() {\n        const props = this.props;\n        const options: Partial<SelectoOptions> = {};\n\n        OPTIONS.forEach(name => {\n            if (name in props) {\n                (options as any)[name] = props[name];\n            }\n        });\n        this.selecto = new VanillaSelecto({\n            ...options,\n            target: this.selectionElement,\n        });\n\n        EVENTS.forEach((name, i) => {\n            this.selecto.on(name, (e: any) => {\n                const selfProps = this.props as any;\n                const result = selfProps[REACT_EVENTS[i]] && selfProps[REACT_EVENTS[i]](e);\n\n                if (result === false) {\n                    e.stop();\n                }\n            });\n        });\n    }\n    public componentDidUpdate(prevProps: Partial<SelectoProperties>) {\n        const props = this.props;\n        const selecto = this.selecto;\n\n        PROPERTIES.forEach(name => {\n            if (prevProps[name] !== props[name]) {\n                (selecto as any)[name] = props[name];\n            }\n        });\n    }\n    public componentWillUnmount() {\n        this.selecto.destroy();\n    }\n}\nexport default interface Selecto extends MethodInterface<SelectoMethods, VanillaSelecto, Selecto> {}\n"]},"metadata":{},"sourceType":"module"}